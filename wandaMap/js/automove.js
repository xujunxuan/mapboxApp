var automove=automove||{}

automove=(function(){
	// automove.data=[
	// [{"name":1,"temp":1,"lat":29.092633,"lon":119.670090,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],
	// [{"name":1,"temp":1,"lat":29.092636,"lon":119.671006,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],
	// [{"name":1,"temp":1,"lat":29.092638,"lon":119.671006,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],
	// [{"name":1,"temp":1,"lat":29.092640,"lon":119.671006,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],
	// [{"name":1,"temp":1,"lat":29.092643,"lon":119.671006,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],
	// [{"name":1,"temp":1,"lat":29.092646,"lon":119.671006,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}]	
	// ];
	//automove.data=[[{"name":1,"temp":1,"lat":29.093418097188135,"lon":119.6723328793629,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.093406873293446,"lon":119.67214080074575,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.093321049083386,"lon":119.67201297692372,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.093239713509945,"lon":119.67188958283884,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.09319689448722,"lon":119.67172884913015,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.093139757395534,"lon":119.67163615721887,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.09307063081559,"lon":119.67156222433584,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.09301736041337,"lon":119.67144524660455,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092970285818907,"lon":119.67132399383235,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092927752791056,"lon":119.67121484423768,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092878105120334,"lon":119.67109507074451,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092827114705926,"lon":119.67098577712142,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092775826045113,"lon":119.67088245703957,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092741789437582,"lon":119.67076683996169,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092683717143757,"lon":119.67066432967812,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092612123430328,"lon":119.67059003615628,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.09254856729777,"lon":119.67051824182681,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.09249728786679,"lon":119.67043450389838,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092490533949558,"lon":119.67029732891484,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.09240404855757,"lon":119.67020701447007,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.09232448500238,"lon":119.67028890579519,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092288057771526,"lon":119.67042087625924,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.09225401086252,"lon":119.67056560233732,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092217282713023,"lon":119.67072015128554,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.09221088506075,"lon":119.67084515472573,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092262906611012,"lon":119.67095655926164,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.09231880731646,"lon":119.67107552577994,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092398026355212,"lon":119.67101555527597,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092475709099773,"lon":119.6709580593278,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092527817296798,"lon":119.67104704358144,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092573750136225,"lon":119.67114170081675,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092625395635295,"lon":119.67123990658234,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092667064921088,"lon":119.67132118466003,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092749637769998,"lon":119.67125834305108,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092822301357714,"lon":119.67120486450358,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092876794813023,"lon":119.67116621019454,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092922191311104,"lon":119.67127454769201,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092961649564145,"lon":119.67137697432577,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.092999052102144,"lon":119.67147027787757,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.093039335208744,"lon":119.6715615602281,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.09308431212284,"lon":119.6716467493568,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.093127945389057,"lon":119.67174456058837,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.093176983905437,"lon":119.6718300522063,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.093234586765305,"lon":119.67192588179006,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.093289873344816,"lon":119.67201854324878,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.09326628344226,"lon":119.67212635788019,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.093267993285593,"lon":119.67223998528209,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}],[{"name":1,"temp":1,"lat":29.09335585056668,"lon":119.67221041066034,"h":0},{"name":2,"temp":1,"lat":29.092535,"lon":119.671206,"h":1}]]
	automove.data=[[{"name":1,"temp":1,"lat":29.093418097188135,"lon":119.6723328793629,"h":0},{"name":2,"temp":1,"lat":29.09335585056668,"lon":119.67221041066034,"h":1}],[{"name":1,"temp":1,"lat":29.093406873293446,"lon":119.67214080074575,"h":0},{"name":2,"temp":1,"lat":29.093267993285593,"lon":119.67223998528209,"h":1}],[{"name":1,"temp":1,"lat":29.093321049083386,"lon":119.67201297692372,"h":0},{"name":2,"temp":1,"lat":29.09326628344226,"lon":119.67212635788019,"h":1}],[{"name":1,"temp":1,"lat":29.093239713509945,"lon":119.67188958283884,"h":0},{"name":2,"temp":1,"lat":29.093289873344816,"lon":119.67201854324878,"h":1}],[{"name":1,"temp":1,"lat":29.09319689448722,"lon":119.67172884913015,"h":0},{"name":2,"temp":1,"lat":29.093234586765305,"lon":119.67192588179006,"h":1}],[{"name":1,"temp":1,"lat":29.093139757395534,"lon":119.67163615721887,"h":0},{"name":2,"temp":1,"lat":29.093176983905437,"lon":119.6718300522063,"h":1}],[{"name":1,"temp":1,"lat":29.09307063081559,"lon":119.67156222433584,"h":0},{"name":2,"temp":1,"lat":29.093127945389057,"lon":119.67174456058837,"h":1}],[{"name":1,"temp":1,"lat":29.09301736041337,"lon":119.67144524660455,"h":0},{"name":2,"temp":1,"lat":29.09308431212284,"lon":119.6716467493568,"h":1}],[{"name":1,"temp":1,"lat":29.092970285818907,"lon":119.67132399383235,"h":0},{"name":2,"temp":1,"lat":29.093039335208744,"lon":119.6715615602281,"h":1}],[{"name":1,"temp":1,"lat":29.092927752791056,"lon":119.67121484423768,"h":0},{"name":2,"temp":1,"lat":29.092999052102144,"lon":119.67147027787757,"h":1}],[{"name":1,"temp":1,"lat":29.092878105120334,"lon":119.67109507074451,"h":0},{"name":2,"temp":1,"lat":29.092961649564145,"lon":119.67137697432577,"h":1}],[{"name":1,"temp":1,"lat":29.092827114705926,"lon":119.67098577712142,"h":0},{"name":2,"temp":1,"lat":29.092922191311104,"lon":119.67127454769201,"h":1}],[{"name":1,"temp":1,"lat":29.092775826045113,"lon":119.67088245703957,"h":0},{"name":2,"temp":1,"lat":29.092876794813023,"lon":119.67116621019454,"h":1}],[{"name":1,"temp":1,"lat":29.092741789437582,"lon":119.67076683996169,"h":0},{"name":2,"temp":1,"lat":29.092822301357714,"lon":119.67120486450358,"h":1}],[{"name":1,"temp":1,"lat":29.092683717143757,"lon":119.67066432967812,"h":0},{"name":2,"temp":1,"lat":29.092749637769998,"lon":119.67125834305108,"h":1}],[{"name":1,"temp":1,"lat":29.092612123430328,"lon":119.67059003615628,"h":0},{"name":2,"temp":1,"lat":29.092667064921088,"lon":119.67132118466003,"h":1}],[{"name":1,"temp":1,"lat":29.09254856729777,"lon":119.67051824182681,"h":0},{"name":2,"temp":1,"lat":29.092625395635295,"lon":119.67123990658234,"h":1}],[{"name":1,"temp":1,"lat":29.09249728786679,"lon":119.67043450389838,"h":0},{"name":2,"temp":1,"lat":29.092573750136225,"lon":119.67114170081675,"h":1}],[{"name":1,"temp":1,"lat":29.092490533949558,"lon":119.67029732891484,"h":0},{"name":2,"temp":1,"lat":29.092527817296798,"lon":119.67104704358144,"h":1}],[{"name":1,"temp":1,"lat":29.09240404855757,"lon":119.67020701447007,"h":0},{"name":2,"temp":1,"lat":29.092475709099773,"lon":119.6709580593278,"h":1}],[{"name":1,"temp":1,"lat":29.09232448500238,"lon":119.67028890579519,"h":0},{"name":2,"temp":1,"lat":29.092398026355212,"lon":119.67101555527597,"h":1}],[{"name":1,"temp":1,"lat":29.092288057771526,"lon":119.67042087625924,"h":0},{"name":2,"temp":1,"lat":29.09231880731646,"lon":119.67107552577994,"h":1}],[{"name":1,"temp":1,"lat":29.09225401086252,"lon":119.67056560233732,"h":0},{"name":2,"temp":1,"lat":29.092262906611012,"lon":119.67095655926164,"h":1}],[{"name":1,"temp":1,"lat":29.092217282713023,"lon":119.67072015128554,"h":0},{"name":2,"temp":1,"lat":29.09221088506075,"lon":119.67084515472573,"h":1}],[{"name":1,"temp":1,"lat":29.09221088506075,"lon":119.67084515472573,"h":0},{"name":2,"temp":1,"lat":29.092217282713023,"lon":119.67072015128554,"h":1}],[{"name":1,"temp":1,"lat":29.092262906611012,"lon":119.67095655926164,"h":0},{"name":2,"temp":1,"lat":29.09225401086252,"lon":119.67056560233732,"h":1}],[{"name":1,"temp":1,"lat":29.09231880731646,"lon":119.67107552577994,"h":0},{"name":2,"temp":1,"lat":29.092288057771526,"lon":119.67042087625924,"h":1}],[{"name":1,"temp":1,"lat":29.092398026355212,"lon":119.67101555527597,"h":0},{"name":2,"temp":1,"lat":29.09232448500238,"lon":119.67028890579519,"h":1}],[{"name":1,"temp":1,"lat":29.092475709099773,"lon":119.6709580593278,"h":0},{"name":2,"temp":1,"lat":29.09240404855757,"lon":119.67020701447007,"h":1}],[{"name":1,"temp":1,"lat":29.092527817296798,"lon":119.67104704358144,"h":0},{"name":2,"temp":1,"lat":29.092490533949558,"lon":119.67029732891484,"h":1}],[{"name":1,"temp":1,"lat":29.092573750136225,"lon":119.67114170081675,"h":0},{"name":2,"temp":1,"lat":29.09249728786679,"lon":119.67043450389838,"h":1}],[{"name":1,"temp":1,"lat":29.092625395635295,"lon":119.67123990658234,"h":0},{"name":2,"temp":1,"lat":29.09254856729777,"lon":119.67051824182681,"h":1}],[{"name":1,"temp":1,"lat":29.092667064921088,"lon":119.67132118466003,"h":0},{"name":2,"temp":1,"lat":29.092612123430328,"lon":119.67059003615628,"h":1}],[{"name":1,"temp":1,"lat":29.092749637769998,"lon":119.67125834305108,"h":0},{"name":2,"temp":1,"lat":29.092683717143757,"lon":119.67066432967812,"h":1}],[{"name":1,"temp":1,"lat":29.092822301357714,"lon":119.67120486450358,"h":0},{"name":2,"temp":1,"lat":29.092741789437582,"lon":119.67076683996169,"h":1}],[{"name":1,"temp":1,"lat":29.092876794813023,"lon":119.67116621019454,"h":0},{"name":2,"temp":1,"lat":29.092775826045113,"lon":119.67088245703957,"h":1}],[{"name":1,"temp":1,"lat":29.092922191311104,"lon":119.67127454769201,"h":0},{"name":2,"temp":1,"lat":29.092827114705926,"lon":119.67098577712142,"h":1}],[{"name":1,"temp":1,"lat":29.092961649564145,"lon":119.67137697432577,"h":0},{"name":2,"temp":1,"lat":29.092878105120334,"lon":119.67109507074451,"h":1}],[{"name":1,"temp":1,"lat":29.092999052102144,"lon":119.67147027787757,"h":0},{"name":2,"temp":1,"lat":29.092927752791056,"lon":119.67121484423768,"h":1}],[{"name":1,"temp":1,"lat":29.093039335208744,"lon":119.6715615602281,"h":0},{"name":2,"temp":1,"lat":29.092970285818907,"lon":119.67132399383235,"h":1}],[{"name":1,"temp":1,"lat":29.09308431212284,"lon":119.6716467493568,"h":0},{"name":2,"temp":1,"lat":29.09301736041337,"lon":119.67144524660455,"h":1}],[{"name":1,"temp":1,"lat":29.093127945389057,"lon":119.67174456058837,"h":0},{"name":2,"temp":1,"lat":29.09307063081559,"lon":119.67156222433584,"h":1}],[{"name":1,"temp":1,"lat":29.093176983905437,"lon":119.6718300522063,"h":0},{"name":2,"temp":1,"lat":29.093139757395534,"lon":119.67163615721887,"h":1}],[{"name":1,"temp":1,"lat":29.093234586765305,"lon":119.67192588179006,"h":0},{"name":2,"temp":1,"lat":29.09319689448722,"lon":119.67172884913015,"h":1}],[{"name":1,"temp":1,"lat":29.093289873344816,"lon":119.67201854324878,"h":0},{"name":2,"temp":1,"lat":29.093239713509945,"lon":119.67188958283884,"h":1}],[{"name":1,"temp":1,"lat":29.09326628344226,"lon":119.67212635788019,"h":0},{"name":2,"temp":1,"lat":29.093321049083386,"lon":119.67201297692372,"h":1}],[{"name":1,"temp":1,"lat":29.093267993285593,"lon":119.67223998528209,"h":0},{"name":2,"temp":1,"lat":29.093406873293446,"lon":119.67214080074575,"h":1}],[{"name":1,"temp":1,"lat":29.09335585056668,"lon":119.67221041066034,"h":0},{"name":2,"temp":1,"lat":29.093418097188135,"lon":119.6723328793629,"h":1}]]
	automove.flag=0;

	automove.setTimer=function(){
		clearInterval(timer)
	    timer = setInterval(function(){
	    	var data=automove.data;
	    	if(automove.flag<data.length){
		    	var arr=data[automove.flag];
	            for (var i in mapname){
	                    fnumber[i]=0;
	            }
	            for (var i=0;i<arr.length;i++){                    
	                fnumber[arr[i].name-1]++;//name是从1开始计数的
	            }
	            for(var i in mapname){
	                $('button[fnum="'+ i +'"]').html(mapname[i]+' 人数：'+fnumber[i]);
	            }       
	            updatePoints(data[automove.flag]);
	            automove.flag++;	    		
	    	}
	    	else{
	    		console.log("automove complete");
	    		return true;
	    	}
	    },1100);//polling interval>1.03s
	}

	automove.restart=function(){
		automove.flag=0;
		automove.setTimer();
	}

	automove.manmade=function(n,x,y,h){
		clearInterval(timer)
    	var arr=automove.data[automove.flag-1];
        for (var i in mapname){
                fnumber[i]=0;
        }
        for (var i=0;i<arr.length;i++){                    
            fnumber[arr[i].name-1]++;//name是从1开始计数的
        }
        for(var i in mapname){
            $('button[fnum="'+ i +'"]').html(mapname[i]+' 人数：'+fnumber[i]);
        }       
        for (var i=0;i<arr.length;i++){                    
            if(arr[i].name==n){
            	arr[i].lat+=x;
            	arr[i].lon+=y;
            	arr[i].h=h;
            }
        }
        console.info(arr);
        updatePoints(arr);    	
	}

	return {
		data:automove.data,
		flag:automove.flag,
		setTimer:automove.setTimer,
		restart:automove.restart,
		manmade:automove.manmade
	}
})($)

